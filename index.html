<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hydroion</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial}

body{
    background:#f2f6fb;
    min-height:200vh;
}

/* TOP BAR */
#topBar{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:60px;
    background:#0a4fff;
    color:white;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:0 30px;
    z-index:1000;
    transition:transform .3s;
}

#projectName{
    font-weight:bold;
    cursor:pointer;
}

#topRight{
    display:flex;
    align-items:center;
    gap:15px;
}

.topBtn{
    background:white;
    color:#0a4fff;
    border:none;
    padding:6px 12px;
    border-radius:6px;
    cursor:pointer;
    font-weight:bold;
}

/* CENTER */
#centerText{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    text-align:center;
}

#centerText h1{font-size:36px}
#centerText p{font-size:18px}

/* FOOTER */
#footer{
    position:fixed;
    bottom:0;
    left:0;
    width:100%;
    height:70px;
    background:#0a4fff;
    color:white;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    gap:6px;
    transition:transform .3s;
}

/* COOKIE */
#cookieBanner{
    position:fixed;
    bottom:20px;
    left:50%;
    transform:translateX(-50%);
    background:white;
    padding:20px;
    border-radius:10px;
    box-shadow:0 10px 30px rgba(0,0,0,.2);
    display:none;
    z-index:2000;
}

.cookieBtn{
    margin:5px;
    padding:8px 14px;
    border:none;
    border-radius:6px;
    cursor:pointer;
}
.accept{background:#0a4fff;color:white}
.reject{background:#ccc}

/* PANELS */
.panel{
    position:fixed;
    inset:0;
    background:white;
    display:none;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    z-index:1500;
}

.panel input{
    width:260px;
    padding:8px;
    margin:6px 0;
}

.panel button{
    margin-top:10px;
    padding:8px 16px;
    background:#0a4fff;
    color:white;
    border:none;
    border-radius:6px;
    cursor:pointer;
}
</style>
</head>

<body>

<!-- TOP -->
<div id="topBar">
    <div id="projectName" onclick="location.reload()">Hydroion</div>
    <div id="topRight">
        <span id="clock"></span>
        <button class="topBtn" id="registerBtn" onclick="openRegister()">Register</button>
        <button class="topBtn" id="loginBtn" onclick="openLogin()">Login</button>
    </div>
</div>

<!-- CENTER -->
<div id="centerText">
    <h1>Hydroion</h1>
    <p>Prototype</p>
</div>

<!-- FOOTER -->
<div id="footer">
    <div>horvath.barnus13@gmail.com</div>
    <div>
        <input id="newsEmail" placeholder="Newsletter email">
        <button class="topBtn" onclick="subscribe()">Subscribe</button>
    </div>
</div>

<!-- COOKIE -->
<div id="cookieBanner">
    <p>This site uses cookies for basic preferences.</p>
    <button class="cookieBtn accept" onclick="cookieSet()">Accept</button>
    <button class="cookieBtn reject" onclick="cookieSet()">Reject</button>
    <button class="cookieBtn" onclick="alert('Only preference storage is used.')">Read</button>
</div>

<!-- REGISTER -->
<div class="panel" id="registerPanel">
    <h2>Register</h2>
    <input id="rName" placeholder="Full name">
    <input id="rUser" placeholder="Username">
    <input id="rEmail" placeholder="Email">
    <input id="rPass" type="password" placeholder="Password">
    <button onclick="register()">Create account</button>
    <button onclick="closePanels()">Back</button>
</div>

<!-- LOGIN -->
<div class="panel" id="loginPanel">
    <h2>Login</h2>
    <input id="lUser" placeholder="Username or Email">
    <input id="lPass" type="password" placeholder="Password">
    <button onclick="login()">Login</button>
    <button onclick="closePanels()">Back</button>
</div>

<script>
/* CLOCK */
setInterval(()=>{
    const d=new Date();
    clock.textContent=d.getHours().toString().padStart(2,'0')+":"+d.getMinutes().toString().padStart(2,'0');
},1000);

/* SCROLL */
window.addEventListener("scroll",()=>{
    const max=document.body.scrollHeight-window.innerHeight;
    if(scrollY<40){
        topBar.style.transform="translateY(0)";
        footer.style.transform="translateY(100%)";
    }else if(scrollY>max-40){
        topBar.style.transform="translateY(-100%)";
        footer.style.transform="translateY(0)";
    }else{
        topBar.style.transform="translateY(-100%)";
        footer.style.transform="translateY(100%)";
    }
});

/* COOKIE */
if(!localStorage.cookie) cookieBanner.style.display="block";
function cookieSet(){
    localStorage.cookie="ok";
    cookieBanner.style.display="none";
}

/* PANELS */
function openRegister(){registerPanel.style.display="flex"}
function openLogin(){loginPanel.style.display="flex"}
function closePanels(){
    registerPanel.style.display="none";
    loginPanel.style.display="none";
}

/* USERS */
let users=JSON.parse(localStorage.users||"[]");

function register(){
    if(users.some(u=>u.user===rUser.value||u.email===rEmail.value)){
        alert("Username or email already exists");
        return;
    }
    users.push({name:rName.value,user:rUser.value,email:rEmail.value,pass:rPass.value});
    localStorage.users=JSON.stringify(users);
    rName.value=rUser.value=rEmail.value=rPass.value="";
    closePanels();
}

function login(){
    const u=users.find(x=>(x.user===lUser.value||x.email===lUser.value)&&x.pass===lPass.value);
    if(!u){alert("Invalid login");return;}
    localStorage.logged=u.user;
    updateLoginState();
    closePanels();
}

function updateLoginState(){
    if(localStorage.logged){
        registerBtn.style.display="none";
        loginBtn.style.display="none";
    }
}
updateLoginState();

/* NEWS */
function subscribe(){
    let list=JSON.parse(localStorage.news||"[]");
    list.push(newsEmail.value);
    localStorage.news=JSON.stringify(list);
    newsEmail.value="";
}
</script>

</body>
</html>
